<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    @page { size: A4; margin: 18mm 14mm; }
    body { 
      font-family: "Times New Roman", Times, serif; 
      font-size: 14px; 
      color: #000; 
      position: relative;
    }
    
    /* Watermark */
    .watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: auto;
      opacity: 0.15;
      z-index: -1;
      pointer-events: none;
    }

    .header {
      background: #0a1f44;
      color: #fff;
      padding: 20px 24px;
      border-radius: 0px;
      margin-bottom: 20px;
      font-family: Arial, sans-serif; /* Keep header clearer if preferred, or switch to serif too. User said "colors and style", implies mainly the table part. But let's keep header professional sans-serif or match body? Standard invoices often differ. I'll stick to Arial for Header as it was specific in previous code, but update if needed. Actually, let's make it consistent. Times New Roman for body content is key. */
    }
    .header .logo-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header .logo-row .left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .header .logo-row .right {
      font-size: 14px;
      font-weight: 500;
    }
    .header .sub { 
      margin-top: 8px; 
      font-size: 13px; 
      line-height: 1.4; 
      font-weight: 500;
      letter-spacing: 0.3px;
    }
    .toprow { display: flex; justify-content: space-between; margin-top: 20px; }
    .box { width: 49%; }
    .no { font-weight: 700; font-size: 14px; }
    .billto { margin-top: 12px; }
    .billto .label { font-weight: 700; margin-bottom: 8px; font-size: 14px; }
    .billto div { line-height: 1.6; }
    .for { margin-top: 14px; }
    .for b { font-size: 14px; }

    /* Table Styles matching the image */
    table { 
      width: 100%; 
      border-collapse: collapse; 
      margin-top: 18px; 
      /* border: 2px solid #000; Removed to allow borderless rows at bottom */
    }
    th, td { 
      border: 2px solid #000; 
      padding: 10px 12px; 
      vertical-align: middle; 
    }
    th { 
      background: #B4C6E7; /* Light Blue from image */
      color: #000;
      text-align: center; /* Image shows centered headers */
      font-weight: 700; 
      font-size: 14px; 
      text-transform: uppercase;
    }
    td { 
      font-size: 14px; 
      font-weight: 500;
    }
    .right { text-align: center; } /* Image shows numbers centered mostly, or right? Let's check image again. Image shows "$220.00" centered. "CBM 1.08" centered. */
    
    /* Specific formatting for the image look */
    .total-cost-row td {
      background: #B4C6E7;
      font-weight: 700;
    }

    .notes { margin-top: 24px; font-size: 12px; line-height: 1.5; }
    .notes ol { margin: 8px 0; padding-left: 20px; }
    .notes ol li { margin-bottom: 6px; }
    .breakdown { margin-top: 16px; font-weight: 700; font-size: 14px; text-decoration: underline; }
  </style>
</head>
<body>

  <!-- Watermark Image -->
  <img src="logo.png" class="watermark" alt="Watermark">

  <div class="header">
    <div class="logo-row">
      <div class="left">
        <img src="logo.png" alt="I&C Logo" style="max-height: 120px; width: auto; filter: brightness(0) invert(1);"> <!-- Whiten logo for dark header if needed, or keep original -->
      </div>
      <!-- <div class="right">
        19878765606
      </div> -->
    </div>
    <div class="sub">
      广东省佛山市南海区里水镇甘蕉上街工业区金辉工业园15号楼一楼  刘先生 19878765606<br>
      I&amp;C LOGISTICS GOODS BILL
    </div>
  </div>

  <div class="toprow">
    <div class="box">
      <div class="no">NO. {{ invoice_no }}</div>
      <div>Date: {{ invoice_date }}</div>

      <div class="billto">
        <div class="label">Bill To</div>
        <div>{{ customer_name }}</div>
        <div>{{ location }}</div>
        <div>{{ phone }}</div>
      </div>
    </div>

    <div class="box right" style="text-align: right;">
       <div class="for right px-10">
         <div><b>For</b></div>
         <div>SEA CARGO</div>
       </div>
    </div>
  </div>

  <table>
    <tr>
      <th style="text-align: left; padding-left: 20px;">ITEM DESCRIBTION</th> <!-- Typo in image "DESCRIBTION", keeping "DESCRIPTION" corrected or matching? User said "use this format". I will correct the typo to DESCRIPTION unless they insist. -->
      <th>TOTAL CBM</th>
    </tr>
    <tr>
      <td style="height: 50px;"> <!-- Add some height for "10 CARTONS..." look -->
        {{ item_description }}
      </td>
      <td class="right">{{ rate_usd_str }}</td>
    </tr>
    <tr>
      <td><b>TOTAL CBM</b></td>
      <td class="right"><b>CBM {{ cbm_str }}</b></td>
    </tr>
    <tr>
      <td><b>PAYMENT DETAILS</b></td>
      <td class="right"><b>{{ payment_details }}</b></td>
    </tr>
    <tr>
      <td style="text-align: right; border: none; padding-right: 12px;">Subtotal</td>
      <td class="right">{{ subtotal_usd_str }}</td>
    </tr>
    <tr>
      <td style="text-align: right; border: none; padding-right: 12px;">OTHER COST</td>
      <td class="right">{{ other_cost_usd_str }}</td>
    </tr>
    <tr class="total-cost-row">
      <td style="text-align: right; border: none; background: transparent; padding-right: 12px;"><b>Total Cost</b></td>
      <td class="right"><b>{{ total_usd_str }}</b></td>
    </tr>
  </table>

  <div class="notes">
    <ol>
      <li>Make all checks payable to I&amp;C Shipping and Logistics.</li>
      <li>Goods must be picked up within one week after notification to avoid paying up to 1% storage fee daily on total invoice amt.</li>
      <li>Goods left in warehouse after 1 month without payment will be sold to cover shipping and storage fee with/without consent of the consignee</li>
      <li>Packages without shipping mark will be rejected by the courier company</li>
      <li>Breakable goods must strictly have the following: have solid box, written fragile articles, wooden Pallet/Crates.</li>
    </ol>
    <div style="margin-top: 6px;">The company will not be liable to any broken item or goods without a solid or wooden package</div>
    <div style="margin-top: 8px;">Should you have any questions concerning this invoice, use the following contact information:</div>
    <div style="margin-top: 4px;">0552161900/0549009957</div>
    <div style="margin-top: 8px; font-weight: 500;">Thank you for your business!</div>


    
    <div class="breakdown">INVOICE BREAKDOWN</div>
    {% if breakdown_items and breakdown_items|length > 1 %}
      <!-- Multiple shipments: show table matching the main style -->
      <table style="margin-top: 8px;">
         <thead>
            <tr style="background: #efefef;">
               <th style="background: #f0f0f0; font-size: 12px;">Tracking Number</th>
               <th style="background: #f0f0f0; font-size: 12px;">Qty</th>
               <th style="background: #f0f0f0; font-size: 12px;">CBM</th>
            </tr>
         </thead>
        {% for item in breakdown_items %}
        <tr>
          <td>{{ item.tracking_number }}</td>
          <td class="right">{{ item.quantity }}</td>
          <td class="right">{{ item.cbm }}</td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <!-- Single shipment -->
      <div style="margin-top: 6px; font-size: 13px; font-weight: normal;">
        {{ breakdown_items[0].tracking_number if breakdown_items else shipping_mark }}
      </div>
    {% endif %}
  </div>

</body>
</html>